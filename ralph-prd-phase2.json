[
  {
    "id": "p2-1",
    "category": "audit",
    "description": "Audit LearningPlayer features for migration",
    "details": "Document all features in LearningPlayer.vue that must be preserved: 1) Audio fetching from S3, 2) Network visualization fire path, 3) Belt progress + Supabase sync, 4) Listening mode overlay, 5) Class context (Schools), 6) Preview mode, 7) Pause/resume state. Output: checklist in progress.txt",
    "passes": true,
    "risk": "low",
    "verification": "Checklist exists in progress.txt with all features listed"
  },
  {
    "id": "p2-2",
    "category": "refactor",
    "description": "Create useAudioFetcher composable",
    "details": "Extract S3 audio fetching logic from LearningPlayer into reusable composable. Methods: fetchAudio(audioId) -> Blob, preloadAudio(audioIds[]), getFromCache(audioId). Uses existing normalizeAudioUrl logic. File: /packages/player-vue/src/composables/useAudioFetcher.ts",
    "passes": false,
    "risk": "medium",
    "verification": "TypeScript compiles, can fetch audio by ID"
  },
  {
    "id": "p2-3",
    "category": "integrate",
    "description": "Wire LearningSession to useAudioFetcher",
    "details": "Update LearningSession to use useAudioFetcher instead of requiring pre-populated audioCache prop. Fetch audio on-demand or preload ahead. Remove audioCache prop requirement.",
    "passes": false,
    "risk": "medium",
    "verification": "LearningSession fetches real audio from S3"
  },
  {
    "id": "p2-4",
    "category": "integrate",
    "description": "Wire LearningSession to CourseDataProvider",
    "details": "LearningSession should accept course prop (like LearningPlayer), use CourseDataProvider + generateLearningScript internally to get scriptItems. Remove scriptItems prop, add course prop.",
    "passes": false,
    "risk": "high",
    "verification": "LearningSession loads course data automatically"
  },
  {
    "id": "p2-5",
    "category": "feature",
    "description": "Add network fire path integration",
    "details": "On cycle-started event, trigger brain network fire path animation. Use NEW Brain3DView system (useBrainNodes, useBrainFirePath) NOT old ConstellationNetworkView. LearningSession emits 'fire-path' event with { nodeIds: string[], durationMs: number }. PlayerContainer passes to Brain3DView which calls useBrainFirePath.playFirePath(). The new system is lightweight Three.js with GPU-accelerated particles.",
    "passes": false,
    "risk": "medium",
    "verification": "Brain nodes light up when LEGO cycles play using new 3D brain"
  },
  {
    "id": "p2-6",
    "category": "feature",
    "description": "Add belt progress persistence",
    "details": "On cycle-complete for debut cycles, update belt progress. Connect to existing useBeltProgress and Supabase sync. Emit events that PlayerContainer can use to update learnerStats.",
    "passes": false,
    "risk": "medium",
    "verification": "Belt progress persists across sessions"
  },
  {
    "id": "p2-7",
    "category": "feature",
    "description": "Port listening mode to LearningSession",
    "details": "Add listening mode overlay support. When activated, show ListeningModePlayer overlay. Pause main session, resume when exited. Match existing LearningPlayer behavior.",
    "passes": false,
    "risk": "high",
    "verification": "Listening mode works in LearningSession"
  },
  {
    "id": "p2-8",
    "category": "feature",
    "description": "Add pause/resume controls",
    "details": "LearningSession needs pause/resume like LearningPlayer. Expose togglePlayback(), handlePause() methods. Wire to BottomNav play/stop button. Preserve state across pause.",
    "passes": false,
    "risk": "medium",
    "verification": "Can pause and resume mid-cycle"
  },
  {
    "id": "p2-9",
    "category": "integrate",
    "description": "Replace LearningPlayer in PlayerContainer",
    "details": "Update PlayerContainer.vue: import LearningSession, add conditional render based on USE_NEW_SESSION flag. Wire all events (playStateChanged, viewProgress, listeningModeChanged). Test both paths.",
    "passes": false,
    "risk": "high",
    "verification": "USE_NEW_SESSION=true uses LearningSession with all features"
  },
  {
    "id": "p2-10",
    "category": "cleanup",
    "description": "Enable USE_NEW_SESSION by default",
    "details": "Once all tests pass, set USE_NEW_SESSION = true by default. Keep flag for rollback safety. Document in CLAUDE.md that new session system is active.",
    "passes": false,
    "risk": "low",
    "verification": "App uses LearningSession by default, can toggle back"
  }
]
